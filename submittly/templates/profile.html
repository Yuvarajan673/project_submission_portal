{% extends 'layouts/base.html' %}
{% block title %}Profile | Submittly{% endblock title %}

{% block content %}
<section class="user-profile-section dashboard">
    <div class="profile-div">
        <a href="#profile-image-change-modal" class="profile-image-div">
            {% if user.profile_image %}
            <img src="{{user.profile_image.url}}" class="profile-image">
            {% else %}
            <p>YS</p>
            {% endif %}
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="-0.5 1 24 24"><!-- Icon from Material Symbols by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="M12 18q2.075 0 3.538-1.462Q17 15.075 17 13q0-2.075-1.462-3.538Q14.075 8 12 8Q9.925 8 8.463 9.462Q7 10.925 7 13q0 2.075 1.463 3.538Q9.925 18 12 18Zm0-2q-1.25 0-2.125-.875T9 13q0-1.25.875-2.125T12 10q1.25 0 2.125.875T15 13q0 1.25-.875 2.125T12 16Zm6-6q.425 0 .712-.288Q19 9.425 19 9t-.288-.713Q18.425 8 18 8t-.712.287Q17 8.575 17 9t.288.712Q17.575 10 18 10ZM4 21q-.825 0-1.412-.587Q2 19.825 2 19V7q0-.825.588-1.412Q3.175 5 4 5h3.15L8.7 3.325q.15-.15.337-.238Q9.225 3 9.425 3h5.15q.2 0 .388.087q.187.088.337.238L16.85 5H20q.825 0 1.413.588Q22 6.175 22 7v12q0 .825-.587 1.413Q20.825 21 20 21Zm16-2V7h-4.05l-1.825-2h-4.25L8.05 7H4v12Zm-8-6Z"/></svg>
        </a>     
        <div>
            <h2>{{user.first_name|capfirst}} {{user.last_name|capfirst}}</h2>
            <h4>{{user.role|capfirst}} • Submitly</h4>
            {% if user.profile_image %}
            <a href="{% url 'remove_profile_image' %}" onclick="return confirm('Are you really want remove Profile Image?')"><button class="remove-profile-image-btn form-btn">Remove Profile Image</button></a>
            {% endif %}
        </div>
        <!-- Profile Image Modal -->
        <div class="modal-backdrop" id="profile-image-change-modal">
            <div class="profile-image-modal modal">
                <div class="modal-head">
                    <div class="close-btn-div">
                        <a onclick="window.history.back();" class="close-btn">&times;</a>
                    </div>
                    <h2 class="modal-title">Choose Profile Image</h2>
                </div>
                <div class="modal-body">
                    <form action="{% url 'upload_profile_image'  %}" method="post" enctype="multipart/form-data" class="profile-image-update-form">
                        {% csrf_token %}
                        <!-- Image Upload Label -->
                        <label for="profile-image-file-input" class="profile-image-upload-label">
                            <p class="profile-text">YS</p>
                            {% if user.profile_image %}
                            <img src="{{user.profile_image.url}}" class="previous-image profile-image ">
                            {% else %}
                            <img src="#" class="no-image">
                            {% endif %}
                        </label>
                        <!-- Image File Input -->
                        <input type="file" accept=".png, .jpg, .jpeg" name="profile-image" class="profile-image-file-input" id="profile-image-file-input" required>
                        <!-- Image Tag -->
                        <!-- Image Upload Button -->
                        <button type="submit" class="form-btn">Update Profile</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="profile-details-div">
        <div class="personal-info-div">
            <h3>Personal Informations</h3>
            <div class="personal-info">
                <div class="profile-firstname-lastname-div profile-text-div">
                    <div class="profile-edit-icon-group-div">
                        <div class="icon-group">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="-1 -1 27 27"><!-- Icon from Tabler Icons by Paweł Kuna - https://github.com/tabler/tabler-icons/blob/master/LICENSE --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 4H7v16m0-8h8"/></svg>
                            <div>
                                <h3>First Name</h3>
                                <h4>{{user.first_name|capfirst}}</h4>
                            </div>
                        </div>
                        <a href="#edit-firstname-lastname-modal">
                            <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 24 24"><!-- Icon from Material Symbols by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6.525q.5 0 .75.313t.25.687t-.262.688T11.5 5H5v14h14v-6.525q0-.5.313-.75t.687-.25t.688.25t.312.75V19q0 .825-.587 1.413T19 21zm4-7v-2.425q0-.4.15-.763t.425-.637l8.6-8.6q.3-.3.675-.45t.75-.15q.4 0 .763.15t.662.45L22.425 3q.275.3.425.663T23 4.4t-.137.738t-.438.662l-8.6 8.6q-.275.275-.637.438t-.763.162H10q-.425 0-.712-.288T9 14m12.025-9.6l-1.4-1.4zM11 13h1.4l5.8-5.8l-.7-.7l-.725-.7L11 11.575zm6.5-6.5l-.725-.7zl.7.7z"/></svg>
                        </a>
                        <!-- Firstname and Lastname edit Modal -->
                        <div class="modal-backdrop" id="edit-firstname-lastname-modal">
                            <div class="firstname-lastname-modal modal">
                                <div class="modal-head">
                                    <div class="close-btn-div">
                                        <a onclick="window.history.back(); window.location.replace(window.location.pathname)" class="close-btn">&times;</a>
                                    </div>
                                    <h2 class="modal-title">Change Firstname and Lastname</h2>
                                </div>
                                <div class="modal-body">
                                    <form class="profile-firstname-lastname-form" action="{% url 'update_first_and_last_name'  %}" method="post">
                                        {% csrf_token %}
                                        <div class="form-field-div">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="-1 -1 27 27"><!-- Icon from Tabler Icons by Paweł Kuna - https://github.com/tabler/tabler-icons/blob/master/LICENSE --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 4H7v16m0-8h8"/></svg>
                                            <input type="text" class="firstname-field form-field" name="first_name" value="{{user.first_name|capfirst}}">
                                        </div>
                                        <div class="form-field-div">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="-1 -1 27 27"><!-- Icon from Tabler Icons by Paweł Kuna - https://github.com/tabler/tabler-icons/blob/master/LICENSE --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16h10"/></svg>
                                            <input type="text" class="lastname-field form-field" name="last_name" value="{{user.last_name|capfirst}}">
                                        </div>
                                        <button type="submit" class="form-btn">Save</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="icon-group">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="-1 -1 27 27"><!-- Icon from Tabler Icons by Paweł Kuna - https://github.com/tabler/tabler-icons/blob/master/LICENSE --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16h10"/></svg>
                    <div>
                        <h3>Last Name</h3>
                        <h4>{{user.last_name|capfirst}}</h4>
                    </div>
                    </div>
                </div>
                <!-- <div class="icon-group profile-lastname-div profile-text-div">
                </div> -->
                <div class="icon-group profile-username-div profile-text-div">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><!-- Icon from Material Symbols by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="M18 18q-.425 0-.712-.288T17 17t.288-.712T18 16h3q.425 0 .713.288T22 17t-.288.713T21 18zm-2-5q-.425 0-.712-.288T15 12t.288-.712T16 11h5q.425 0 .713.288T22 12t-.288.713T21 13zm-2-5q-.425 0-.712-.288T13 7t.288-.712T14 6h7q.425 0 .713.288T22 7t-.288.713T21 8zm-6 4q-1.25 0-2.125-.875T5 9t.875-2.125T8 6t2.125.875T11 9t-.875 2.125T8 12m-5 6q-.425 0-.712-.288T2 17v-.9q0-.525.25-1t.7-.75q1.125-.675 2.388-1.012T8 13t2.663.338t2.387 1.012q.45.275.7.75t.25 1v.9q0 .425-.288.713T13 18z"/></svg>
                    <div>
                        <h3>Username</h3>
                        <h4>{{user.username}}</h4>
                    </div>
                </div>
                <div class="icon-group profile-email-div profile-text-div">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><!-- Icon from Material Symbols by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm8-7L4 8v10h16V8zm0-2l8-5H4zM4 8V6v12z"/></svg>
                    <div>
                        <h3>Email</h3>
                        <h4>{{user.email}}</h4>
                    </div>
                </div>
                <div class="icon-group profile-password-div profile-text-div">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><!-- Icon from Material Symbols by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="M3 17h18q.425 0 .713.288T22 18t-.288.713T21 19H3q-.425 0-.712-.288T2 18t.288-.712T3 17m1-5.55l-.475.85q-.15.275-.45.35t-.575-.075t-.35-.45t.075-.575l.475-.85h-.95q-.325 0-.537-.212T1 9.95t.213-.537t.537-.213h.95l-.475-.8q-.15-.275-.075-.575t.35-.45t.575-.075t.45.35l.475.8l.475-.8q.15-.275.45-.35t.575.075t.35.45t-.075.575l-.475.8h.95q.325 0 .538.213T7 9.95t-.213.538t-.537.212H5.3l.475.85q.15.275.075.575t-.35.45t-.575.075t-.45-.35zm8 0l-.475.85q-.15.275-.45.35t-.575-.075t-.35-.45t.075-.575l.475-.85h-.95q-.325 0-.537-.212T9 9.95t.213-.537t.537-.213h.95l-.475-.8q-.15-.275-.075-.575t.35-.45t.575-.075t.45.35l.475.8l.475-.8q.15-.275.45-.35t.575.075t.35.45t-.075.575l-.475.8h.95q.325 0 .537.213T15 9.95t-.213.538t-.537.212h-.95l.475.85q.15.275.075.575t-.35.45t-.575.075t-.45-.35zm8 0l-.475.85q-.15.275-.45.35t-.575-.075t-.35-.45t.075-.575l.475-.85h-.95q-.325 0-.537-.212T17 9.95t.213-.537t.537-.213h.95l-.475-.8q-.15-.275-.075-.575t.35-.45t.575-.075t.45.35l.475.8l.475-.8q.15-.275.45-.35t.575.075t.35.45t-.075.575l-.475.8h.95q.325 0 .538.213T23 9.95t-.213.538t-.537.212h-.95l.475.85q.15.275.075.575t-.35.45t-.575.075t-.45-.35z"/></svg>
                    <div>
                        <h3>Password</h3>
                        <h4>last changed jan 5</h4>
                    </div>
                </div>
            </div>
        </div>
        <div class="account-overview-div">
            <h3>Account Overview</h3>
            <div class="account-overview">
                <div class="icon-group profile-section-div profile-text-div">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 48 48"><!-- Icon from Plump free icons by Streamline - https://creativecommons.org/licenses/by/4.0/ --><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"><path d="M25 29.999c7.99-.017 13.372-.233 16.512-.414c2.076-.12 3.752-1.591 3.992-3.656C45.757 23.76 46 20.5 46 16s-.243-7.76-.496-9.93c-.24-2.064-1.916-3.535-3.991-3.655C38.243 2.226 32.543 2 24 2q-1.028 0-2 .004M12.5 34v11M6 9.5a6.5 6.5 0 1 0 13 0a6.5 6.5 0 0 0-13 0"/><path d="M28.539 16.338c.625.036 1.192.379 1.326.99c.144.656.226 1.675-.035 3.103c-.143.781-.809 1.342-1.596 1.45L20 23l-1.8 19.32c-.12 1.284-1.05 2.343-2.33 2.49a29 29 0 0 1-3.303.19c-1.263 0-2.403-.084-3.318-.185c-1.338-.149-2.3-1.275-2.373-2.62l-.618-11.317a67 67 0 0 1-2.578-.183a1.82 1.82 0 0 1-1.654-1.889c.117-3.77.593-7.216.989-9.515c.298-1.728 1.762-2.977 3.514-3.062c6.958-.338 14.84-.302 22.01.11Z"/></g></svg>
                    <div>
                        <h3>Section</h3>
                        <h4> {% if section != 'None' %} {{user.section}} {% else %} --|-- {% endif %}</h4>
                    </div>
                </div>
                <div class="icon-group profile-role-div profile-text-div">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 32 32"><!-- Icon from OpenSearch UI by OpenSearch Contributors - https://github.com/opensearch-project/oui/blob/main/LICENSE.txt --><path fill="currentColor" d="M19.307 3.21a2.91 2.91 0 1 0-.223 1.94a11.64 11.64 0 0 1 8.232 7.049l1.775-.698a13.58 13.58 0 0 0-9.784-8.291m-2.822 1.638a.97.97 0 1 1 0-1.939a.97.97 0 0 1 0 1.94m-4.267.805l-.717-1.774a13.58 13.58 0 0 0-8.291 9.784a2.91 2.91 0 1 0 1.94.223a11.64 11.64 0 0 1 7.068-8.233m-8.34 11.802a.97.97 0 1 1 0-1.94a.97.97 0 0 1 0 1.94m12.607 8.727a2.91 2.91 0 0 0-2.599 1.62a11.64 11.64 0 0 1-8.233-7.05l-1.774.717a13.58 13.58 0 0 0 9.813 8.291a2.91 2.91 0 1 0 2.793-3.578m0 3.879a.97.97 0 1 1 0-1.94a.97.97 0 0 1 0 1.94M32 16.485a2.91 2.91 0 1 0-4.199 2.599a11.64 11.64 0 0 1-7.05 8.232l.718 1.775a13.58 13.58 0 0 0 8.291-9.813A2.91 2.91 0 0 0 32 16.485m-2.91.97a.97.97 0 1 1 0-1.94a.97.97 0 0 1 0 1.94"/><path fill="currentColor" d="M19.19 16.35a3.879 3.879 0 1 0-5.42 0a4.85 4.85 0 0 0-2.134 4.014v1.939h9.697v-1.94a4.85 4.85 0 0 0-2.143-4.014m-4.645-2.774a1.94 1.94 0 1 1 3.88 0a1.94 1.94 0 0 1-3.88 0m-.97 6.788a2.91 2.91 0 1 1 5.819 0z" class="ouiIcon__fillSecondary"/></svg>
                    <div>
                        <h3>Role</h3>
                        <h4>{{user.role|capfirst}}</h4>
                    </div>
                </div>
                <div class="icon-group profile-joined-div profile-text-div">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><!-- Icon from Material Symbols by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V3q0-.425.288-.712T7 2t.713.288T8 3v1h8V3q0-.425.288-.712T17 2t.713.288T18 3v1h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5zM5 8h14V6H5zm0 0V6zm7 6q-.425 0-.712-.288T11 13t.288-.712T12 12t.713.288T13 13t-.288.713T12 14m-4 0q-.425 0-.712-.288T7 13t.288-.712T8 12t.713.288T9 13t-.288.713T8 14m8 0q-.425 0-.712-.288T15 13t.288-.712T16 12t.713.288T17 13t-.288.713T16 14m-4 4q-.425 0-.712-.288T11 17t.288-.712T12 16t.713.288T13 17t-.288.713T12 18m-4 0q-.425 0-.712-.288T7 17t.288-.712T8 16t.713.288T9 17t-.288.713T8 18m8 0q-.425 0-.712-.288T15 17t.288-.712T16 16t.713.288T17 17t-.288.713T16 18"/></svg>
                    <div>
                        <h3>Joined</h3>
                        <h4>{{user.date_joined}}</h4>
                    </div>
                </div>
                <div class="icon-group profile-lastlogin-div profile-text-div">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><!-- Icon from Sargam Icons by Abhimanyu Rana - https://github.com/planetabhi/sargam-icons/blob/main/LICENSE.txt --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="1.5" d="m14 15l3-3m0 0l-3-3m3 3H3m7-4V5.4A2.4 2.4 0 0 1 12.4 3h6.2A2.4 2.4 0 0 1 21 5.4v13.2a2.4 2.4 0 0 1-2.4 2.4h-6.2a2.4 2.4 0 0 1-2.4-2.4V16"/></svg>
                    <div>
                        <h3>Last Login</h3>
                        <h4>{{user.last_login}}</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<script>
    const USER_ID = "{{user.id}}"
</script>
{% endblock content %}